****************************************************			Pre Security                   *************************************************

///////////////////////////////////////////////////  Introduction to Cyber Security ////////////////////////////////////
Threat intelligence aims to gather information to help the company better prepare against potential adversaries.
As a result of threat intelligence, we identify the threat actor (adversary), predict their activity, and consequently, we will be able to mitigate their attacks and prepare a response strategy.

incident response process:
Preparation  ->  Detection and Analysis  ->  Containment, Eradication, and Recovery  -> Post-Incident Activity (Reporting)

Malware analysis (learn about the malicious programs):
1- Static analysis works by inspecting the malicious program without running it. Usually, this requires solid knowledge of assembly language. 
2- Dynamic analysis works by running the malware in a controlled environment and monitoring its activities. observe how the malware behaves when running.

Careers:
Security Analyst: explore and evaluate company networks to uncover actionable data and recommendations for engineers to develop preventative measures "do analysis for network posture to pass the results fo engineers consider it the top level of SOC that take the reports and information and make analysis to help the stakeholders to enhannce the security posture").(Responsible for maintaining the security of an organisation's data)

Security Engineer: Design, monitor and maintain security controls, solutoins, networks, and systems to help prevent cyberattacks

Incident Responder: Identifies and mitigates attacks whilst an attackers operations are still unfolding

Digital Forensics Examiner: Responsible for using digital forensics to investigate incidents and crimes

Malware Analyst Analyses: all types of malware to learn more about how they work and what they do

Penetration Tester

Responsible for testing technology products for security loopholes

////////////////////////////////////////////////////////////////////////  Network Fundamentals ///////////////////////////////

Port forwarding is an essential component in connecting applications and services to the Internet. Without port forwarding, applications and services such as web servers are only available to devices within the same direct network.
-Port forwarding is configured at the router of a network.

Stateless firewall: inspect individual packets.
Stateful firewall:  determines the behaviour of a device based upon the entire connection.

When registering a domain name, the second-level domain & subdomains are limited to 63 characters + the TLD and can only use a-z 0-9 and hyphens (cannot start or end with hyphens or have consecutive hyphens).
-can use multiple subdomains split with periods to create longer names, such as jupiter.servers.tryhackme.com. But the length must be kept to 253 characters or less for the whole domain, no limit to the number of subdomains.
-There are two types of TLD, gTLD (Generic Top Level) and ccTLD (Country Code Top Level Domain)


Internet Information Services, also known as IIS, is a Microsoft web server that runs on Windows operating system and is used to exchange static and dynamic web content with internet users
NGINX is open-source web server software used for reverse proxy, load balancing, and caching
Apache is the web server that processes requests and serves web assets and content via HTTP 

Web server delivers files from what's called its root directory, which is defined in the software settings (ex: Nginx and Apache share the same default location of /var/www/html) to it's client.
Web servers can host multiple websites with different domain names using (virtual hosts: web server software), this software checks the hostname being requested from the HTTP headers and matches that against its virtual hosts (virtual hosts are just text-based configuration files). if match it will display the correct website if not it will display the default website.
-each website in the web server is called virtual host, when the host come in the request the webserver search about it in it's virtual hosts and display the correct website if no match it will display the default one (ex: one.com being mapped to /var/www/website_one (website.one is a virtual host or website on the server).

su: switch user but keep the current working directory & current environment variables & current shell settings & the PATH variable nor updated to  new user variable), su – : switch user and all these things (Resets the environment variables to those of the target user, Changes the working directory to the target user’s home directory, Resets the shell settings to those of the target user, The target user’s PATH variable is updated to include the user-specific directories )
-> su withour any users will switch to super user automaically.

--------------------
Python provides a lightweight and easy-to-use module called "HTTPServer". This module turns your computer into a quick and easy web server that you can use to serve your own files(files in the directory when you call the command " can change bu optoins"), where they can then be downloaded by another computing using commands such as curl and wget.

--------------------
ps command, TTY stands for "teletypewriter." It refers to the terminal device or session where the process is running. Essentially, it represents the interface through which the process is interacting with the user.
-tty1, tty2, ... ttyN: These are physical or virtual console sessions. means the process is running on the first console (perhaps directly from the machine or virtual console).
-pts/0, pts/1, ... pts/N: These are "pseudoterminals: terminal sessions that are initiated over a network (like SSH) or through a terminal emulator (like GNOME Terminal, xterm, or PuTTY). pts stands for "pseudo terminal slave."

Namespaces are great for security as it is a way of isolating processes from another -- only those that are in the same namespace will be able to see each other.
Namespace: set of symbols used to identify the objects that ensure that each object has a unique symbol or name, to be managed in memory or something like this. it's the idea of process management and containers. in another words it is a kali kernel feature that partition the processes.(PID: consider a namespace)
systemd (system daemon) is one of the first processes that are started once a system boots and it initializes, Any program or piece of software that we want to start will start as a child process of systemd. This means that it is controlled by system

systemctl: command allows us to interact with the systemd process/daemon ( to stop or start process and so on)

SIGTERM - Kill the process, but allow it to do some cleanup tasks beforehand
SIGKILL - Kill the process - doesn't do any cleanup after the fact
SIGSTOP - Stop/suspend a process

Crontab: utility that is used for Scheduling and Automating Tasks in Unix-like operating systems. It facilitates the users to run the scripts or Linux Commands at specified times and intervals. Each user can have their Crontab file (cron table), it uses the job scheduler (cron) to execute tasks "cron itself is named after 'Chronos' the Greek word for time".
crontab Structure -> MIN HOUR DOM MON DOW CMD
-> cron daemon (cron) will continuously check crontab files to determine if any scheduled tasks match the current time. When a match is found, it executes the specified command or script.
for administrator: /etc/crontab and /etc/cron.d/, while individual users manage their tasks using the crontab -e.
:Cron is the service that runs in the background and executes tasks.
:Crontab is the file or tool used to define and schedule the tasks that cron will execute

---------------
apt or the package management tool get it's software from a repo that maintained by the community or OS vendor, so in your system there is default repo for your OS and this repo maintained by your vendor or community and their can add a new software to the repo and if you need the new released software you can make apt update and (to get the updated version of the repo) then install the software.
if you want to install a software that isn't in the default system repo -> you can install it by getting it from it's repo and install it by steps, or simply add it's repo to your apt repositories and install it by apt:

integrity of software packages is verified using GPG (Gnu Privacy Guard) keys. These keys ensure that the software comes from a trusted developer. you should add this key to apt-key before add it's repo. add the new repo in a new file in the (apt/sources.list.d), directory we can add the new repo to source.list direct but it's preferred to separate the repos that is not part of your default vendor repositories to be in it's own file in sourceslist.d  . (add-apt-repository: this command is auto repo adding without needing the previous steps).


-------------   windows    -----------------

File System:
New Technology File System or simply NTFS. Before NTFS, there was FAT16/FAT32 (File Allocation Table) and HPFS (High Performance File System). 
NTFS is known as a journaling file system. In case of a failure, the file system can automatically repair the folders/files on disk using information stored in a log file. This function is not possible with FAT. NTFS support Encryption (Encryption File System or EFS)   

Alternate Data Streams (ADS) are a file attribute only found on the NTFS file system.
In NTFS, every file consists of several parts called "attributes," and one of these attributes is $Data, which is the main part of a file containing its contents. The primary data stream stores the actual file data, like text in a text file, but there can be other streams attached to the file, called alternate data streams (ADS). consider the main file as the "primary" data stream, and ADS as hidden, secondary sections of the file that can store extra data "not normally visible". meta data is condiser ADS bec it's a data that saved in file beside the main data.

system  environment variable for the Windows directory is %windir%
When a user account is created, a profile is created for the user (The creation of the user's profile is done upon initial login).

System Configuration utility (MSConfig) is for advanced troubleshooting, and its main purpose is to help diagnose startup issues. 
Task Manager (taskmgr) to manage (enable/disable) startup items. The System Configuration utility is NOT a startup management program. 

Tools: ( all tools can viewed from system configuration tool
Disk Management
Windows Administrative Tools.
Performance Monitor (perfmon)
User Account Control , Local Users and Groups(lusrmgr.msc).
Event Viewer.
Task Scheduler
System Configuration (MSConfig) 'most important'
Computer Management (compmgmt)  'most important'
Control Pannel
Resource monitor (resmon)
System Information (msinfo32)
System Properties

Environment variables store information about the operating system environment.
Environment variables also store data that is used by other programs. ex: the WINDIR environment variable contains the location of the Windows installation directory. Programs can query the value of this variable to determine where Windows operating system files are located.

net: for configuring and managing network settings, user accounts, and services.
netstat: for viewing network connections and detailed network statistics.

The Windows Registry (per Microsoft) is a central hierarchical database used to store information necessary to configure the system for one or more users, applications, and hardware devices.
The registry contains information that Windows continually references during operation, such as:
Profiles for each user
Applications installed on the computer and the types of documents that each can create
Property sheet settings for folders and application icons
What hardware exists on the system
The ports that are being used.

A registry hive is a group of keys, subkeys, and values in the registry that has a set of supporting files that contain backups of its data.
The supporting files for all hives except HKEY_CURRENT_USER are in the %SystemRoot%\System32\Config folder on Windows NT 4.0, Windows 2000, Windows XP, Windows Server 2003, and Windows Vista. The supporting files for HKEY_CURRENT_USER are in the %SystemRoot%\Profiles\Username folder. 
 

Windows Update is a service provided by Microsoft to provide security updates.
Updates are typically released on the 2nd Tuesday of each month. This day is called Patch Tuesday (if there an urgent patch it's ok to be released at any time)

"Windows Firewall offers three firewall profiles: domain, private and public":
-Domain - The domain profile applies to networks where the host system can authenticate to a domain controller. 
-Private - The private profile is a user-assigned profile and is used to designate private or home networks.
-Public - The default profile is the public profile, used to designate public networks such as Wi-Fi hotspots at coffee shops, airports, and other locations.

Microsoft Defender SmartScreen (windows protection)(app & browse control) protects against phishing or malware websites and applications, and the downloading of potentially malicious files

Trusted Platform Module (TPM) technology is designed to provide hardware-based, security-related functions

BitLocker Drive Encryption is a data protection feature that integrates with the operating system and addresses the threats of data theft or exposure from lost, stolen, or inappropriately decommissioned computers.(BitLocker provides the most protection when used with a Trusted Platform Module (TPM) version 1.2 or later).
TPM is a hardware component installed in many newer computers by the computer manufacturers. It works with BitLocker to help protect user data and to ensure that a computer has not been tampered with while the system was offline.
BitLocker helps mitigate unauthorized data access by enhancing file and system protections.

Volume Shadow Copy Service (VSS) is a technology in Windows operating systems designed to create "shadow copies," or snapshots, of data. This allows for consistent backups of files, even if they're currently in use.
When a backup process is initiated, VSS coordinates actions across various applications, services, and components that might be accessing or modifying files. It ensures that files are captured in a stable, unchanging state without interrupting their use, allowing reliable backups of open or "locked" files.
->VSS creates a "point-in-time" version of files (snapshot or an exact copy of the data as it existed at a specific moment), allows backup applications to copy data without causing downtime, can also access these snapshots to recover previous versions of files without needing a full restore.

more tools:
-Windows Antimalware Scan Interface (AMSI) is a versatile interface standard that allows your applications and services to integrate with any antimalware product that's present on a machine. AMSI provides enhanced malware protection for your end-users and their data, applications, and workloads.
-Credential Guard
-https://www.csoonline.com/article/564531/the-best-new-windows-10-security-features.html
-how attacker work on windows: https://lolbas-project.github.io/

////////////////////////////////////  active directory ////
	
Virtual Network Computing (VNC) protocol is a remote access protocol that allows users to control and interact with a remote computer's desktop as if they were sitting directly in front of it.

0.0.0.0 address is a "wildcard" address, it's the Ip for all interfaces on you the device. When used as a local address, it means that the service is listening on all available network interfaces on the device. In other words: 0.0.0.0 as a local address indicates the service is accepting connections on any interface.

in windows issuing commands, we can only issue the commands within the Windows Path. You can issue the command set to check your path from the command line.
 -> The terminal output shows the path where MS Windows will execute commands, indicated by the line starting with Path=.

ver command to determine the operating system (OS) version.
systeminfo command to list various information about the system
chkdsk: checks the file system and disk volumes for errors and bad sectors.
driverquery: displays a list of installed device drivers.
sfc /scannow: scans system files for corruption and repairs them if possible.
 -> System File Checker (SFC) 
shutdown /s can shut down a system.


////////////////////////////////// powershell

PowerShell is a task automation and configuration management program from Microsoft, consisting of a command-line shell and the associated scripting language.
-It combines a command-line interface and a scripting language built on the .NET framework.
-PowerShell is object-oriented -> allow administrators to automate tasks effectively by manipulating objects.
-PowerShell has lately expanded to support macOS and Linux.
-Automation tool
-Open-source and cross-platform

Windows and Unix handled system operations differently, Windows used structured data and APIs, while Unix treated everything as text files. 
 ->solution was to develop an object-oriented approach, combining scripting simplicity with the power of the .NET framework.

object represents an item with properties (characteristics) and methods (actions).
objects are fundamental units that encapsulate data (properties) like file names, usernames or sizes as data  and functionality (Methods) like copying a file or stopping a process.

cmdlet (pronounced command-let) is run in PowerShell, it returns objects that retain their properties and methods.
PowerShell commands are known as cmdlets (pronounced command-lets)
cmdlet (pronounced "command-let") is a lightweight command that performs a single function. Cmdlets are specialized commands in PowerShell, built on the .NET Framework, designed to follow a standard verb-noun naming convention (e.g., Get-Process, Set-Item, New-Object).
-Single Purpose: Each cmdlet is designed to perform a specific task or operation.
-cmdlet itself is not an actual command or executable in PowerShell—it’s just the term used to describe the specialized commands within the PowerShell environment.
-Get-Command will list all available cmdlets and other commands

standard PowerShell syntax: Cmdlet -Property "pattern*"

////////////////////////////////////////////////////////  Linux shell //////////////

To switch between these shells, you can type the shell name that is present on your OS,
to permanently change your default shell : chsh -s 'shel_path'

shell script is nothing but a set of commands.
.sh: the default extension for bash scripts.

Every script should start from shebang (#! followed by the name of the interpreter "#!/bin/bash")

./ tells the shell to execute the file that is present in the current directory.

without ./ before the script name
 -> the shell will search the script in the PATH environment variable (that contains all the directories except the current one), and it will not find the defined script in any of those directories and generate an error.  

loops:
	for i in {1..10};
	do
	echo $i
	done
do indicates the start of the loop, done indicate the end of the loop.

Conditions:
	read name
	if [ "$name" = "Stewart" ]; then
        	echo "Welcome Stewart! Here is the secret: THM_Script"
	else
        	echo "Sorry! You are not authorized to access the secret."
	fi
comments: #


//////////////////////////////////////////////////network /////////////////////////////////////

RFC 1918 defines the following three ranges of private IP addresses:
10.0.0.0 - 10.255.255.255 (10/8)
172.16.0.0 - 172.31.255.255 (172.16/12)
192.168.0.0 - 192.168.255.255 (192.168/16)

IP address identifies the host, Port number (in Transport layer) need a mechanism to determine the sending and receiving process. This can be achieved by using port numbers. A port number uses two octets; consequently, it ranges between 1 and 65535; port 0 is reserved. (The number 65535 is calculated by the expression 216 − 1.)

TCP: connection-oriented, establishment of a TCP connection before any data can be sent,  each data octet has a sequence number. 

0.0.0.0: represent all network interface cards on host, Allows connections from any external IP address. If a service is bound to 0.0.0.0, it can accept connections from other devices on the network or even over the internet, depending on firewall and network configurations.
127.0.0.1: represent the local address and can reached only from your host, Only allows connections from the local machine itself (loopback). If a service is bound to 127.0.0.1, only applications running on the same device can connect to that service.

tshark: The command-line version of Wireshark.
tcpdump: A command-line packet analyzer used for capturing or analyzing network traffic.

SMTP is to transfers an email from Client to an SMTP server or to send and receive between servers (port 25):
	HELO or EHLO: sender domain 
	MAIL FROM: specifies the sender’s email address
	RCPT TO; specifies the recipient’s email address
	DATA: indicates that the client will begin sending the content of the email message.
	.  is sent on a line by itself to indicate the end of the


POP3 is to get mails from servers to client, enough when working from one device, if you need to connect the email server from many devices use the IMAP
POP3: deleting a message after retrieving it, port 110.
common POP3 commands :
	USER <username> identifies the user
	PASS <password> provides the user’s password
	STAT requests the number of messages and total size
	LIST lists all messages and their sizes
	RETR <message_number> retrieves the specified message
	DELE <message_number> marks a message for deletion
	QUIT ends the POP3 session applying changes, such as deletions


Internet Message Access Protocol (IMAP): maintaining a synchronized mailbox across multiple devices, port 43.
 IMAP protocol commands 
	LOGIN <username> <password> authenticates the user
	SELECT <mailbox> selects the mailbox folder to work with
	FETCH <mail_number> <data_item_name> Example fetch 3 body[] to fetch message number 3, header and body.
	MOVE <sequence_set> <mailbox> moves the specified messages to another mailbox
	COPY <sequence_set> <data_item_name> copies the specified messages to another mailbox
	LOGOUT logs out


















//////////////////////////////////////////search tools ///////
Advanced Search:
google: https://www.google.com/advanced_search
Microsoft: https://support.microsoft.com/en-us/topic/advanced-search-options-b92e25f1-0085-4271-bdf9-14aaea720930
DuckDuckGo: https://duckduckgo.com/duckduckgo-help-pages/results/syntax/
GitHub: https://github.com/cipher387/Advanced-search-operators-list?tab=readme-ov-file

Specialized Search Engines:
Shodan: search engine for devices connected to the Internet. It allows you to search for specific types and versions of servers, networking equipment or devices (search for apache 2.41 will give you all apache servers with this version over the world and their distributions), Shodan focuses on Internet-connected devices and systems, such as servers.
CenSys: focuses on Internet-connected hosts, websites, certificates, and other Internet assets. Some of its use cases include enumerating domains in use, auditing open ports and services, and discovering rogue assets within a network.( https://search.censys.io/ )
VirusTotal: online website that provides a virus-scanning service for files using multiple antivirus engines.
Have I Been Pwned (HIBP) does one thing it tells you if an email address has appeared in a leaked data breach.(https://haveibeenpwned.com/)

Vulnarabilities & Exploits 
CVE "common vulnerability & Exposures": have vulnerability or exposure with assigned a unique identifier an it it's maintained by MITRE.
NVD "National Vulnerability Database": managed by the National Institute of Standards and Technology (NIST), NVD is a comprehensive database that provides detailed information about CVEs.

Exploit Database: exploits for CVE vulnarabilities
GitHub, a web-based platform for software development, can contain many tools related to CVEs, along with proof-of-concept (PoC) and exploit codes.

try to depend on documentations for search about anything.

















nmap --script=vuln


///////////////////////////////////////////////////   Jr Pentest -> Network Security -> Nmap Post Port Scan   ////////

-sV: collect and determine service and version information for the open ports, control the intensity with --version-intensity LEVEL(0->10). this Scan work by TCP scan. sV required connecting to this open port to grab the service.

Standard traceroute starts with a packet of low TTL (Time to Live) and keeps increasing until it reaches the target. Nmap’s traceroute starts with a packet of high TTL and keeps decreasing it

script is a piece of code that does not need to be compiled. In other words, it remains in its original human-readable form and does not need to be converted to machine language.
Nmap Scripting Engine (NSE) is a Lua interpreter that allows Nmap to execute Nmap scripts written in Lua language








.